{% extends 'base.html' %}
{% load static %}

{% block title %}æˆ‘çš„é€šçŸ¥ - æ ¡å›­é—®ç­”ç³»ç»Ÿ{% endblock %}

{% block content %}
<div class="notification-container">
    <h1>æˆ‘çš„é€šçŸ¥</h1>

    {% if notifications %}
        <div class="notification-actions-top">
            <form method="post" action="{% url 'mark_all_notifications_as_read' %}" class="inline-form">
                {% csrf_token %}
                <button type="submit" class="btn btn-secondary">æ ‡è®°æ‰€æœ‰å·²è¯»</button>
            </form>
        </div>

        <ul class="notification-list">
            {% for notification in notifications %}
                <li class="notification-item {% if not notification.is_read %}unread{% endif %}">
                    <div class="notification-content">
                        <span class="notification-icon">
                            {% if "å›ç­”" in notification.content %}ğŸ’¬{% elif "é‡‡çº³" in notification.content %}âœ…{% elif "è¯„è®º" in notification.content %}ğŸ“{% else %}ğŸ””{% endif %}
                        </span>
                        <p>{{ notification.content }}</p>
                        <small class="notification-time">{{ notification.created_at|date:"Y-m-d H:i" }}</small>
                    </div>
                    <div class="notification-actions">
                        {% if not notification.is_read %}
                            <form method="post" action="{% url 'mark_notification_as_read' notification.pk %}" class="inline-form">
                                {% csrf_token %}
                                <button type="submit" class="btn btn-sm btn-outline-primary">æ ‡è®°ä¸ºå·²è¯»</button>
                            </form>
                        {% else %}
                            <span class="read-status">å·²è¯»</span>
                        {% endif %}
                    </div>
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p class="no-notifications">æ‚¨ç›®å‰æ²¡æœ‰æ–°çš„é€šçŸ¥ã€‚</p>
    {% endif %}
</div>
{% endblock %}